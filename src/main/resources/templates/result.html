<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Calling friend</title>


    <!--<script type="text/javascript" src="TwilioClient.js"></script>-->

    <script type = "text/javascript"
            src ="//media.twiliocdn.com/sdk/js/client/v1.7/twilio.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <script type="text/javascript" src="js/src/TwilioClient.js" ></script>
    <script type="text/javascript" src="js/src/UIScripts.js" ></script>
    <!--<link rel="stylesheet" th:href="@{/css/style.css}"/>-->
    <link rel="stylesheet" type="text/css" href="../css/style.css">

    <link rel="stylesheet" type="text/css" href="/css/style.css">


</head>
<body>
    <div class="col-12 sticky-top header">
        <form th:object="${result}">
        <h1>Hello <label th:text="*{firstname}"/>!</h1>
        <h2>your phone is <label id="from" th:text="*{phonenumber}"/></h2>
        </form>
    </div>

    <div id = "mainDiv" class="container-fluid" align="center">
        <div id="mainDivRow" class="row">

            <div class="col-0 col-md-0 col-lg-3">
                <div class="column">
                </div>
            </div>

            <div class="col-12 col-md-8 col-lg-6">
                <div id="calls" class="column">
                    <h2>calls history</h2>
                    <h6>this is just an example</h6>
                </div>
            </div>

            <div class="d-none d-md-block col-md-4 col-lg-3">
                <div id = "callColumn" class="column call-column">


                    <div id = "dial-pad-panel" class="dial-pad-panel">

                        <form>
                            <input class="form-control phone-input" maxlength="15" id="inputnumber" type="text"
                                   placeholder="+1 123 456 7890" onfocusout="numberInputUnfocus()" oninput="this.value = numberInputFormat()"/>

                            <div class="invalid-feedback">
                                The number is not fully entered
                            </div>

                        </form>

                        <table align="center" class="dial-pad">

                            <tbody>

                            <tr>
                                <td><button onclick="handleClick(event)" class="btn btn-outline-primary dial-button">1</button></td>
                                <td><button onclick="handleClick(event)" class="btn btn-outline-primary dial-button">2</button></td>
                                <td><button onclick="handleClick(event)" class="btn btn-outline-primary dial-button">3</button></td>
                            </tr>
                            <tr>
                                <td><button onclick="handleClick(event)"class="btn btn-outline-primary dial-button">4</button></td>
                                <td><button onclick="handleClick(event)" class="btn btn-outline-primary dial-button">5</button></td>
                                <td><button onclick="handleClick(event)" class="btn btn-outline-primary dial-button">6</button></td>
                            </tr>
                            <tr>
                                <td><button onclick="handleClick(event)" class="btn btn-outline-primary dial-button">7</button></td>
                                <td><button onclick="handleClick(event)" class="btn btn-outline-primary dial-button">8</button></td>
                                <td><button onclick="handleClick(event)" class="btn btn-outline-primary dial-button">9</button></td>
                            </tr>

                            <tr>
                                <td>

                                </td>
                                <td>
                                    <button onclick="handleClick(event)" class="btn btn-outline-primary dial-button">0</button>
                                </td>
                                <td>
                                    <svg onclick="deleteLast()" class="bi bi-backspace btn btn-outline-primary dial-button" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M6.603 2h7.08a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-7.08a1 1 0 0 1-.76-.35L1 8l4.844-5.65A1 1 0 0 1 6.603 2zm7.08-1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08z"/>
                                        <path fill-rule="evenodd" d="M5.83 5.146a.5.5 0 0 0 0 .708l5 5a.5.5 0 0 0 .707-.708l-5-5a.5.5 0 0 0-.708 0z"/>
                                        <path fill-rule="evenodd" d="M11.537 5.146a.5.5 0 0 1 0 .708l-5 5a.5.5 0 0 1-.708-.708l5-5a.5.5 0 0 1 .707 0z"/>
                                    </svg>
                                </td>

                            </tr>
                            </tbody>
                        </table>

                        <div class="call-column-footer">
                            <svg onclick="outgoingCall()" class="bi bi-arrow-up-right-circle-fill btn-outline-success docall-button" width="4em" height="4em" viewBox="0 0 16 16" fill="green" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.5 5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6.707l-4.146 4.147a.5.5 0 0 1-.708-.708L9.293 6H6.5a.5.5 0 0 1 0-1z"/>
                            </svg>
                        </div>

                    </div>

                    <div id="callPanel" class="call-panel">
                        <div style="display: none" id = "incomingCall">
                            <p>Incoming call from: <label id ="fromClient"></label></p>
                            <div id="incomingButtons">
                                <button class="btn btn-success" type="submit" id="acceptCall">accept call</button>
                                <button class="btn btn-warning" type="submit" id="rejectCall">reject call</button>
                            </div>
                        </div>

                        <div style="display: none" id = "outgoingCall">
                            <p>Outgoing call to: <label id ="toClient"></label></p>
                        </div>

                        <button class="btn btn-danger" onclick="endCall()" type="submit" style="display: none" id="endCall">end call</button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        addTestingCallsInfo();
        getToken();
    </script>

</div>
</body>
</html>
